# ホワイトボード編集ロック機能テスト手順

## 🧪 テスト環境

- **端末**: Android Pixel 9 (192.168.0.13:45681)
- **アプリ**: GoShopping v3.0 (prod flavor)
- **機能**: ホワイトボード編集ロック機能

## 📋 テストケース

### ✅ 基本機能テスト

#### 1. 編集ロック取得テスト

- [ ] ホワイトボードエディターにアクセス
- [ ] 描画開始時に自動ロック取得が動作するか
- [ ] アプリバーに🔓緑アイコンが表示されるか
- [ ] 正常に描画できるか

#### 2. UI無効化テスト

**他端末で編集ロック取得後に以下確認**:

- [ ] 色選択ボタンが半透明・無効化されているか
- [ ] 線幅ボタンのツールチップが「編集ロック中」になっているか
- [ ] ズーム機能（+/-）が無効化されているか
- [ ] 全消去ボタンが無効化されているか
- [ ] 描画操作がブロックされるか（\_controller?.clear()）

#### 3. 視覚的フィードバックテスト

**編集ロック状態時に以下確認**:

- [ ] アプリバーに🔒オレンジアイコンが表示されるか
- [ ] オレンジアイコンタップで詳細ダイアログが表示されるか
- [ ] キャンバスに半透明黒オーバーレイが表示されるか
- [ ] オーバーレイ中央にロック情報カード（編集者名・残り時間）が表示されるか

#### 4. 描画ブロック機能テスト

**他ユーザー編集中に以下確認**:

- [ ] 描画開始時にロック取得失敗ダイアログが表示されるか
- [ ] ダイアログ後に描画がクリアされるか（\_controller?.clear()）
- [ ] `IgnorePointer`で操作がブロックされるか

### 🔄 リアルタイム監視テスト

#### 5. Stream監視テスト

- [ ] 他端末でロック取得→即座にUI更新されるか
- [ ] 他端末でロック解除→即座にUI復帰するか
- [ ] ロック残り時間がリアルタイム更新されるか

#### 6. 自動ロック解除テスト

- [ ] アプリ終了時（dispose）に自動ロック解除されるか
- [ ] 1時間経過後にロックが自動期限切れになるか

### ⚠️ エラーハンドリングテスト

#### 7. ネットワーク問題テスト

- [ ] Firestore接続失敗時に適切なエラーメッセージが表示されるか
- [ ] オフライン時の編集ロック機能の挙動は適切か

#### 8. 競合状態テスト

- [ ] 同時ロック取得試行時の処理は適切か
- [ ] データ競合によるアプリクラッシュは発生しないか

---

## 📊 テスト結果記録

### 実行日時: 2026-01-26

#### テスト結果

- [ ] 全テストケース PASS
- [ ] 一部不具合発見 → 詳細記録
- [ ] 重大な問題発見 → 緊急修正必要

#### 発見された問題点

1.
2.
3.

#### パフォーマンス評価

- ロック取得速度: \_\_\_ms
- UI応答性: \_\_\_/10
- メモリ使用量: \_\_\_MB

---

## 🎯 改善提案

### 次回修正項目

1.
2.
3.

### 追加機能提案

1.
2.
3.
